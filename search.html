---
layout: default
title: "ê²€ìƒ‰"
permalink: /search/
---

<div class="search-container">
  <div class="search-header">
    <h1><i class="fas fa-search"></i> ë¸”ë¡œê·¸ ê²€ìƒ‰</h1>
    <p>ì›í•˜ëŠ” ë‚´ìš©ì„ ë¹ ë¥´ê²Œ ì°¾ì•„ë³´ì„¸ìš”. í•œê¸€ê³¼ ì˜ì–´ë¥¼ ëª¨ë‘ ì§€ì›í•©ë‹ˆë‹¤.</p>
  </div>

  <div class="search-box">
    <input type="text" id="search-input" placeholder="ê²€ìƒ‰ì–´ë¥¼ ì…ë ¥í•˜ì„¸ìš” (ì˜ˆ: AI, ì¸ê³µì§€ëŠ¥, LLM)" autocomplete="off" autofocus>
    <button id="search-button">
      <i class="fas fa-search"></i>
      <span>ê²€ìƒ‰</span>
    </button>
  </div>

  <div id="search-suggestions" class="search-suggestions" style="display: none;">
    <!-- ê²€ìƒ‰ ì œì•ˆì‚¬í•­ -->
  </div>

  <div id="search-results" class="search-results">
    <!-- ê²€ìƒ‰ ê²°ê³¼ê°€ ì—¬ê¸°ì— í‘œì‹œë©ë‹ˆë‹¤ -->
  </div>

  <div id="search-stats" class="search-stats" style="display: none;">
    <!-- ê²€ìƒ‰ í†µê³„ -->
  </div>
</div>

<style>
.search-container {
  max-width: 800px;
  margin: 0 auto;
  padding: 20px;
}

.search-header {
  text-align: center;
  margin-bottom: 30px;
}

.search-header h1 {
  color: #2c3e50;
  margin-bottom: 10px;
}

.search-box {
  display: flex;
  margin-bottom: 20px;
  box-shadow: 0 2px 10px rgba(0,0,0,0.1);
  border-radius: 8px;
  overflow: hidden;
}

#search-input {
  flex: 1;
  padding: 15px 20px;
  border: none;
  font-size: 16px;
  outline: none;
  font-family: inherit;
}

#search-button {
  padding: 15px 25px;
  background: #3498db;
  color: white;
  border: none;
  cursor: pointer;
  font-size: 16px;
  transition: all 0.3s ease;
  display: flex;
  align-items: center;
  gap: 8px;
  min-width: 100px;
  justify-content: center;
}

#search-button:hover {
  background: #2980b9;
  transform: translateY(-1px);
  box-shadow: 0 4px 8px rgba(52, 152, 219, 0.3);
}

#search-button:active {
  transform: translateY(0);
  box-shadow: 0 2px 4px rgba(52, 152, 219, 0.3);
}

#search-button i {
  font-size: 14px;
}

@media (max-width: 600px) {
  #search-button span {
    display: none;
  }
  #search-button {
    min-width: 60px;
    padding: 15px 20px;
  }
}

.search-suggestions {
  background: white;
  border: 1px solid #ddd;
  border-radius: 8px;
  margin-bottom: 20px;
  box-shadow: 0 2px 10px rgba(0,0,0,0.1);
}

.suggestion-item {
  padding: 10px 15px;
  cursor: pointer;
  border-bottom: 1px solid #eee;
}

.suggestion-item:hover {
  background: #f8f9fa;
}

.suggestion-item:last-child {
  border-bottom: none;
}

.search-stats {
  text-align: center;
  color: #666;
  margin-bottom: 20px;
  font-size: 14px;
}

.search-results {
  min-height: 200px;
}

.search-result-item {
  background: white;
  border: 1px solid #e1e8ed;
  border-radius: 8px;
  padding: 20px;
  margin-bottom: 15px;
  transition: box-shadow 0.3s;
}

.search-result-item:hover {
  box-shadow: 0 4px 12px rgba(0,0,0,0.1);
}

.result-title {
  font-size: 18px;
  font-weight: bold;
  margin-bottom: 8px;
}

.result-title a {
  color: #2c3e50;
  text-decoration: none;
}

.result-title a:hover {
  color: #3498db;
}

.result-meta {
  font-size: 14px;
  color: #666;
  margin-bottom: 10px;
}

.result-snippet {
  line-height: 1.6;
  color: #333;
}

.result-tags {
  margin-top: 10px;
}

.tag {
  display: inline-block;
  background: #ecf0f1;
  color: #2c3e50;
  padding: 4px 8px;
  border-radius: 4px;
  font-size: 12px;
  margin-right: 5px;
  margin-bottom: 5px;
}

.no-results {
  text-align: center;
  padding: 40px;
  color: #666;
}

.loading {
  text-align: center;
  padding: 20px;
  color: #666;
}

mark {
  background: #fff3cd;
  padding: 2px 4px;
  border-radius: 3px;
  font-weight: bold;
}

.search-tips {
  background: #f8f9fa;
  border: 1px solid #dee2e6;
  border-radius: 8px;
  padding: 20px;
  margin-top: 30px;
}

.search-tips h3 {
  margin-top: 0;
  color: #495057;
}

.search-tips ul {
  margin: 0;
  padding-left: 20px;
}

.search-tips li {
  margin-bottom: 5px;
  color: #6c757d;
}

@media (max-width: 768px) {
  .search-container {
    padding: 15px;
  }
  
  .search-box {
    flex-direction: column;
  }
  
  #search-input, #search-button {
    border-radius: 0;
  }
  
  #search-input {
    border-bottom: 1px solid #ddd;
  }
}
</style>

<script>
// ì „ì—­ ê²€ìƒ‰ ë°ì´í„°
let searchData = [];
let isSearching = false;

// ê²€ìƒ‰ ë°ì´í„° ë¡œë“œ
async function loadSearchData() {
  try {
    const response = await fetch('/search.json');
    searchData = await response.json();
    console.log(`ê²€ìƒ‰ ë°ì´í„° ë¡œë“œ ì™„ë£Œ: ${searchData.length}ê°œ í¬ìŠ¤íŠ¸`);
  } catch (error) {
    console.error('ê²€ìƒ‰ ë°ì´í„° ë¡œë“œ ì‹¤íŒ¨:', error);
  }
}

// í…ìŠ¤íŠ¸ ì •ê·œí™” (Ruby í•„í„°ì™€ ë™ì¼í•œ ë¡œì§)
function normalizeText(text) {
  if (!text) return '';
  
  return text
    .replace(/[\x00-\x1F\x7F-\x9F]/g, '') // ì œì–´ ë¬¸ì ì œê±°
    .replace(/\s+/g, ' ') // ì—°ì† ê³µë°±ì„ ë‹¨ì¼ ê³µë°±ìœ¼ë¡œ
    .trim()
    .toLowerCase();
}

// ê²€ìƒ‰ ì ìˆ˜ ê³„ì‚°
function calculateScore(post, query) {
  const normalizedQuery = normalizeText(query);
  if (!normalizedQuery) return 0;
  
  let score = 0;
  
  // ì œëª© ê²€ìƒ‰ (ê°€ì¤‘ì¹˜ 3)
  const title = normalizeText(post.title || '');
  if (title.includes(normalizedQuery)) score += 300;
  
  // ë‚´ìš© ê²€ìƒ‰ (ê°€ì¤‘ì¹˜ 1)
  const content = normalizeText(post.content || '');
  if (content.includes(normalizedQuery)) score += 100;
  
  // íƒœê·¸ ê²€ìƒ‰ (ê°€ì¤‘ì¹˜ 2)
  const tags = normalizeText((post.tags || []).join(' '));
  if (tags.includes(normalizedQuery)) score += 200;
  
  // ì¹´í…Œê³ ë¦¬ ê²€ìƒ‰ (ê°€ì¤‘ì¹˜ 2)
  const categories = normalizeText((post.categories || []).join(' '));
  if (categories.includes(normalizedQuery)) score += 200;
  
  // ë¶€ë¶„ ë§¤ì¹­ ì ìˆ˜ ì¶”ê°€
  const queryWords = normalizedQuery.split(/\s+/).filter(word => word.length > 0);
  queryWords.forEach(word => {
    if (word.length >= 2) {
      [title, content, tags, categories].forEach((text, index) => {
        const weight = [3, 1, 2, 2][index];
        if (text.includes(word)) {
          score += 25 * weight;
        }
      });
    }
  });
  
  return score;
}

// ê²€ìƒ‰ í•˜ì´ë¼ì´íŠ¸
function highlightMatches(text, query) {
  if (!text || !query) return text;
  
  const normalizedQuery = normalizeText(query);
  const queryWords = normalizedQuery.split(/\s+/).filter(word => word.length >= 2);
  
  let highlighted = text;
  
  // ì „ì²´ ì¿¼ë¦¬ í•˜ì´ë¼ì´íŠ¸
  if (normalizedQuery.length >= 2) {
    const regex = new RegExp(`(${escapeRegex(query)})`, 'gi');
    highlighted = highlighted.replace(regex, '<mark>$1</mark>');
  }
  
  // ê°œë³„ ë‹¨ì–´ í•˜ì´ë¼ì´íŠ¸
  queryWords.forEach(word => {
    const regex = new RegExp(`(${escapeRegex(word)})`, 'gi');
    highlighted = highlighted.replace(regex, '<mark>$1</mark>');
  });
  
  return highlighted;
}

// ì •ê·œì‹ ì´ìŠ¤ì¼€ì´í”„
function escapeRegex(string) {
  return string.replace(/[.*+?^${}()|[\]\\]/g, '\\$&');
}

// ìŠ¤ë‹ˆí« ì¶”ì¶œ
function extractSnippet(content, query, length = 200) {
  if (!content || !query) return content ? content.substring(0, length) : '';
  
  const normalizedContent = normalizeText(content);
  const normalizedQuery = normalizeText(query);
  
  const matchPos = normalizedContent.indexOf(normalizedQuery);
  
  if (matchPos !== -1) {
    const start = Math.max(0, matchPos - length / 4);
    let snippet = content.substring(start, start + length);
    
    if (start > 0) {
      snippet = '...' + snippet.substring(snippet.indexOf(' ') + 1);
    }
    
    if (start + length < content.length) {
      const lastSpace = snippet.lastIndexOf(' ');
      if (lastSpace > 0) {
        snippet = snippet.substring(0, lastSpace) + '...';
      }
    }
    
    return snippet;
  }
  
  return content.substring(0, length);
}

// ê²€ìƒ‰ ì‹¤í–‰
async function performSearch(query) {
  if (isSearching) return;
  if (!query || query.trim().length < 1) {
    showNoResults('ê²€ìƒ‰ì–´ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.');
    return;
  }
  
  isSearching = true;
  showLoading();
  
  try {
    // ê²€ìƒ‰ ë°ì´í„°ê°€ ë¡œë“œë˜ì§€ ì•Šì•˜ë‹¤ë©´ ë¡œë“œ
    if (searchData.length === 0) {
      await loadSearchData();
    }
    
    const results = [];
    
    searchData.forEach(post => {
      const score = calculateScore(post, query);
      if (score > 0) {
        results.push({
          post: post,
          score: score,
          titleHighlighted: highlightMatches(post.title || '', query),
          snippet: extractSnippet(post.content || '', query),
          snippetHighlighted: highlightMatches(extractSnippet(post.content || '', query), query)
        });
      }
    });
    
    // ì ìˆ˜ìˆœìœ¼ë¡œ ì •ë ¬
    results.sort((a, b) => b.score - a.score);
    
    // ìƒìœ„ 20ê°œ ê²°ê³¼ë§Œ í‘œì‹œ
    const limitedResults = results.slice(0, 20);
    
    showResults(limitedResults, query);
    
  } catch (error) {
    console.error('ê²€ìƒ‰ ì¤‘ ì˜¤ë¥˜:', error);
    showNoResults('ê²€ìƒ‰ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.');
  } finally {
    isSearching = false;
  }
}

// ë¡œë”© í‘œì‹œ
function showLoading() {
  document.getElementById('search-results').innerHTML = `
    <div class="loading">
      <p>ğŸ” ê²€ìƒ‰ ì¤‘...</p>
    </div>
  `;
  document.getElementById('search-stats').style.display = 'none';
}

// ê²°ê³¼ í‘œì‹œ
function showResults(results, query) {
  const resultsContainer = document.getElementById('search-results');
  const statsContainer = document.getElementById('search-stats');
  
  if (results.length === 0) {
    showNoResults(`"${query}"ì— ëŒ€í•œ ê²€ìƒ‰ ê²°ê³¼ê°€ ì—†ìŠµë‹ˆë‹¤.`);
    return;
  }
  
  // í†µê³„ í‘œì‹œ
  statsContainer.innerHTML = `
    <p>"<strong>${query}</strong>"ì— ëŒ€í•œ ê²€ìƒ‰ ê²°ê³¼: <strong>${results.length}ê°œ</strong></p>
  `;
  statsContainer.style.display = 'block';
  
  // ê²°ê³¼ í‘œì‹œ
  const resultsHtml = results.map(result => {
    const post = result.post;
    const date = new Date(post.date).toLocaleDateString('ko-KR');
    const categories = (post.categories || []).join(' > ');
    const tags = (post.tags || []).map(tag => `<span class="tag">${tag}</span>`).join('');
    
    return `
      <div class="search-result-item">
        <div class="result-title">
          <a href="${post.url}">${result.titleHighlighted}</a>
        </div>
        <div class="result-meta">
          ğŸ“… ${date} | ğŸ“ ${categories}
        </div>
        <div class="result-snippet">
          ${result.snippetHighlighted}
        </div>
        ${tags ? `<div class="result-tags">${tags}</div>` : ''}
      </div>
    `;
  }).join('');
  
  resultsContainer.innerHTML = resultsHtml;
}

// ê²°ê³¼ ì—†ìŒ í‘œì‹œ
function showNoResults(message) {
  document.getElementById('search-results').innerHTML = `
    <div class="no-results">
      <p>${message}</p>
    </div>
  `;
  document.getElementById('search-stats').style.display = 'none';
}

// ê²€ìƒ‰ ì œì•ˆì‚¬í•­ í‘œì‹œ
function showSuggestions(suggestions) {
  const suggestionsContainer = document.getElementById('search-suggestions');
  
  if (suggestions.length === 0) {
    suggestionsContainer.style.display = 'none';
    return;
  }
  
  const suggestionsHtml = suggestions.map(suggestion => 
    `<div class="suggestion-item" onclick="selectSuggestion('${suggestion}')">${suggestion}</div>`
  ).join('');
  
  suggestionsContainer.innerHTML = suggestionsHtml;
  suggestionsContainer.style.display = 'block';
}

// ì œì•ˆì‚¬í•­ ì„ íƒ
function selectSuggestion(suggestion) {
  document.getElementById('search-input').value = suggestion;
  document.getElementById('search-suggestions').style.display = 'none';
  performSearch(suggestion);
}

// í˜ì´ì§€ ë¡œë“œ ì‹œ ì´ˆê¸°í™”
document.addEventListener('DOMContentLoaded', function() {
  const searchInput = document.getElementById('search-input');
  const searchButton = document.getElementById('search-button');
  
  // ê²€ìƒ‰ ë²„íŠ¼ í´ë¦­
  searchButton.addEventListener('click', function() {
    const query = searchInput.value.trim();
    if (query) {
      performSearch(query);
    }
  });
  
  // ì—”í„° í‚¤ ê²€ìƒ‰
  searchInput.addEventListener('keypress', function(e) {
    if (e.key === 'Enter') {
      const query = searchInput.value.trim();
      if (query) {
        performSearch(query);
      }
    }
  });
  
  // ì‹¤ì‹œê°„ ê²€ìƒ‰ ì œì•ˆ (ë””ë°”ìš´ì‹±)
  let debounceTimer;
  searchInput.addEventListener('input', function() {
    clearTimeout(debounceTimer);
    const query = this.value.trim();
    
    if (query.length >= 2) {
      debounceTimer = setTimeout(() => {
        // ê°„ë‹¨í•œ ê²€ìƒ‰ ì œì•ˆ ë¡œì§
        const suggestions = [];
        searchData.forEach(post => {
          const title = normalizeText(post.title || '');
          const normalizedQuery = normalizeText(query);
          
          if (title.includes(normalizedQuery) && !suggestions.includes(post.title)) {
            suggestions.push(post.title);
          }
        });
        
        showSuggestions(suggestions.slice(0, 5));
      }, 300);
    } else {
      document.getElementById('search-suggestions').style.display = 'none';
    }
  });
  
  // ì™¸ë¶€ í´ë¦­ ì‹œ ì œì•ˆì‚¬í•­ ìˆ¨ê¸°ê¸°
  document.addEventListener('click', function(e) {
    if (!e.target.closest('.search-suggestions') && !e.target.closest('#search-input')) {
      document.getElementById('search-suggestions').style.display = 'none';
    }
  });
  
  // URLì—ì„œ ê²€ìƒ‰ì–´ ì¶”ì¶œ
  const urlParams = new URLSearchParams(window.location.search);
  const queryParam = urlParams.get('q');
  if (queryParam) {
    searchInput.value = queryParam;
    performSearch(queryParam);
  }
  
  // ê²€ìƒ‰ ë°ì´í„° ì‚¬ì „ ë¡œë“œ
  loadSearchData();
});
</script>

<div class="search-tips">
  <h3>ğŸ’¡ ê²€ìƒ‰ íŒ</h3>
  <ul>
    <li>í•œê¸€ê³¼ ì˜ì–´ ëª¨ë‘ ì§€ì›í•©ë‹ˆë‹¤ (ì˜ˆ: "AI", "ì¸ê³µì§€ëŠ¥")</li>
    <li>ë¶€ë¶„ ê²€ìƒ‰ì´ ê°€ëŠ¥í•©ë‹ˆë‹¤ (ì˜ˆ: "í”„ë¡¬í”„íŠ¸" â†’ "í”„ë¡¬í”„íŠ¸ ì—”ì§€ë‹ˆì–´ë§")</li>
    <li>ì œëª©, ë‚´ìš©, íƒœê·¸, ì¹´í…Œê³ ë¦¬ì—ì„œ ëª¨ë‘ ê²€ìƒ‰ë©ë‹ˆë‹¤</li>
    <li>ì—¬ëŸ¬ ë‹¨ì–´ë¡œ ê²€ìƒ‰í•˜ë©´ ë” ì •í™•í•œ ê²°ê³¼ë¥¼ ì–»ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤</li>
  </ul>
</div> 