variables:
  google_url: https://www.google.com
  github_url: https://github.com
  stackoverflow_url: https://stackoverflow.com

runcharts:
  - title: Website Response Time (seconds)
    rate-ms: 3000
    scale: 0
    items:
      - label: Google
        sample: curl -o /dev/null -s -w '%{time_total}' $google_url
        color: 178
      - label: GitHub
        sample: curl -o /dev/null -s -w '%{time_total}' $github_url
        color: 85
      - label: StackOverflow
        sample: curl -o /dev/null -s -w '%{time_total}' $stackoverflow_url
        color: 202
    triggers:
      - title: High latency alert
        condition: echo "$cur > 2.0" | bc -l
        actions:
          terminal-bell: true
          sound: true
          visual: true
          script: 'echo "Alert: High latency detected for $label - $cur s"'

barcharts:
  - title: HTTP Status Codes
    rate-ms: 5000
    items:
      - label: Google (200)
        sample: curl -o /dev/null -s -w '%{http_code}' $google_url | grep -c "200" || echo "0"
      - label: GitHub (200)
        sample: curl -o /dev/null -s -w '%{http_code}' $github_url | grep -c "200" || echo "0"
      - label: StackOverflow (200)
        sample: curl -o /dev/null -s -w '%{http_code}' $stackoverflow_url | grep -c "200" || echo "0"

sparklines:
  - title: DNS Resolution Time (ms)
    rate-ms: 2000
    scale: 0
    sample: dig +stats google.com | grep "Query time:" | awk '{print $4}'

textboxes:
  - title: Website Health Check
    rate-ms: 10000
    sample: |
      echo "=== Website Health Status ==="
      echo "Google: $(curl -o /dev/null -s -w 'Status: %{http_code}, Time: %{time_total}s' $google_url)"
      echo "GitHub: $(curl -o /dev/null -s -w 'Status: %{http_code}, Time: %{time_total}s' $github_url)"
      echo "StackOverflow: $(curl -o /dev/null -s -w 'Status: %{http_code}, Time: %{time_total}s' $stackoverflow_url)"
      echo "=== DNS Info ==="
      echo "Google DNS: $(dig +short google.com | head -1)"
      echo "Local DNS: $(scutil --dns | grep 'nameserver\[0\]' | head -1 | awk '{print $3}')"
