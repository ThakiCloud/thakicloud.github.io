---
title: "دليل الإعادة الكاملة لـ DeepSeek-R1: خط أنابيب التعلم التعزيزي ثنائي المراحل + SFT ثنائي المراحل + التقطير"
excerpt: "دليل خطوة بخطوة للإعادة الكاملة لخط أنابيب التدريب الرسمي لـ DeepSeek-R1. من التعلم التعزيزي إلى تقطير المعرفة - دليل تنفيذ شامل"
seo_title: "خط أنابيب تدريب DeepSeek-R1 - دليل الإعادة الكاملة"
seo_description: "أتقن منهجية تدريب DeepSeek-R1 الكاملة مع دليلنا الشامل الذي يغطي التعلم التعزيزي ثنائي المراحل وSFT ثنائي المراحل وعمليات التقطير"
date: 2025-05-30
categories:
  - llmops
tags:
  - DeepSeek-R1
  - التعلم-التعزيزي
  - SFT
  - التقطير
  - PPO
  - RLHF
  - سلسلة-التفكير
  - تدريب-النماذج
  - تقطير-المعرفة
author_profile: true
toc: true
toc_label: "خط أنابيب تدريب DeepSeek-R1"
lang: ar
permalink: /ar/llmops/deepseek-r1-training-pipeline-guide/
canonical_url: "https://thakicloud.github.io/ar/llmops/deepseek-r1-training-pipeline-guide/"
---

⏱️ **الوقت المقدر للقراءة**: 15 دقيقة

> **الملخص** يوفر هذا الدليل الشامل إعادة خطوة بخطوة لخط أنابيب **التعلم التعزيزي ثنائي المراحل + SFT ثنائي المراحل + التقطير** الخاص بـ DeepSeek-R1. بناءً على النصوص والتكوينات من المستودع الرسمي، نفصل **منهجية التنفيذ الكاملة** لكل مرحلة. الإطار متاح تحت **رخصة MIT** للاستخدام التجاري.

---

## نظرة عامة على خط أنابيب تدريب DeepSeek-R1

[DeepSeek-R1](https://github.com/deepseek-ai/DeepSeek-R1) يمثل نموذجاً حقق قدرات تفكير استثنائية من خلال **التعلم التعزيزي واسع النطاق**. يوفر المستودع الرسمي خط أنابيب تدريب يتكون من خمس مراحل متميزة:

### هيكل خط الأنابيب الكامل

تتبع منهجية التدريب نهجاً متطوراً متعدد المراحل مصمم لتعزيز قدرات النموذج تدريجياً. تبدأ العملية بنموذج أساسي يخضع للتعلم التعزيزي الأولي لتطوير قدرات التفكير الأساسية، مما ينشئ DeepSeek-R1-Zero. يتلقى هذا النموذج الأساسي بعد ذلك تحسيناً إضافياً من خلال مرحلة ثانية من التعلم التعزيزي، مع دمج بيانات البداية الباردة لتحقيق قدرات DeepSeek-R1 الكاملة.

يستمر خط الأنابيب مع مراحل الضبط الدقيق المُشرف عليه التي تركز على تحسين الجودة والاستقرار. تعزز مرحلة SFT الأولى جودة الاستجابة والاتساق، بينما تؤكد مرحلة SFT الثانية على توافق الأمان والاستقرار السلوكي. أخيراً، تنقل عملية التقطير المعرفة والقدرات المتراكمة إلى نماذج أصغر وأكثر كفاءة مناسبة للنشر الإنتاجي.

### مؤشرات الأداء الأساسية

يُظهر تقدم التدريب تحسينات كبيرة عبر المعايير الرئيسية:

**النموذج الأساسي (DeepSeek-V3-Base)**: يعمل كنموذج اللغة الأساسي
**المرحلة 1 RL (DeepSeek-R1-Zero)**: يحقق اكتساب قدرة التفكير الأولية مع درجة MMLU 85.2
**المرحلة 2 RL (DeepSeek-R1)**: يُظهر تحسن الجودة مع درجة MMLU تصل إلى 89.7
**مراحل SFT (DeepSeek-R1-SFT)**: تُظهر تعزيز الاستقرار مع درجة GSM8K 97.3
**التقطير (Qwen-32B-Distill)**: يحافظ على كفاءة أداء 95% في شكل مضغوط

## المرحلة 1: إعداد البيئة والتحضير

### تثبيت المكتبات الأساسية

يتطلب التنفيذ مجموعة شاملة من التبعيات والأدوات. تبدأ العملية باستنساخ مستودع DeepSeek-R1 الرسمي وإنشاء بيئة Python مناسبة. يتضمن الإعداد تثبيت PyTorch مع دعم CUDA، ومكتبة transformers للتعامل مع النماذج، ومكتبة datasets لمعالجة البيانات، وaccelerate للتدريب الموزع، وdeepspeed لتحسين الذاكرة، وwandb لتتبع التجارب، وflash-attention للكفاءة الحاسوبية.

### متطلبات الأجهزة

يتطلب خط أنابيب التدريب موارد حاسوبية كبيرة عبر مراحل مختلفة. تتطلب المرحلة 1 RL حداً أدنى من 8 وحدات معالجة رسوميات A100 80GB، مع التوصية بـ 16 وحدة A100 80GB، باستخدام أكثر من 640GB ذاكرة ومتطلبة 7-14 يوماً من وقت التدريب. تحافظ المرحلة 2 RL على متطلبات مماثلة مع مدة تدريب 3-7 أيام. مراحل SFT أكثر تواضعاً، تتطلب 4-8 وحدات معالجة رسوميات A100 80GB مع ذاكرة 320GB+ ووقت تدريب 1-3 أيام. التقطير هو الأكثر كفاءة، يحتاج فقط 2-4 وحدات معالجة رسوميات A100 80GB مع ذاكرة 160GB+ ووقت تدريب 12-24 ساعة.

## المرحلة 2: التعلم التعزيزي للمرحلة الأولى - تدريب DeepSeek-R1-Zero

### تحضير البيانات

تركز المرحلة الأولى من التعلم التعزيزي على تطوير قدرات التفكير الأساسية من خلال مسائل رياضية وتفكيرية منسقة بعناية. تتضمن عملية تحضير البيانات تحميل مجموعات بيانات متنوعة بما في ذلك مسائل الرياضيات التنافسية وتحديات الحساب الابتدائي ومهام التفكير. يتم تنسيق هذه المجموعات بشكل متسق لضمان المعالجة الموحدة طوال خط أنابيب التدريب.

تعمل عملية تنسيق البيانات على توحيد مصادر المسائل الرياضية المختلفة في هيكل مشترك يتضمن بيانات المسائل ومنهجيات الحل ومستويات الصعوبة وأنواع المسائل. يمكّن هذا التوحيد النموذج من تعلم أنماط التفكير عبر مجالات رياضية مختلفة مع الحفاظ على الاتساق في عملية التعلم.

### تكوين بيئة التعلم التعزيزي

تتطلب بيئة التعلم التعزيزي تكويناً دقيقاً لتوازن الاستكشاف والاستغلال أثناء التدريب. يتضمن الإعداد تعريف هندسة النموذج الأساسي، وإنشاء أطوال التسلسل القصوى للمعالجة، وتكوين المعاملات الفائقة للتعلم التعزيزي مثل معدلات التعلم وأحجام الدفعات، وإعداد مواصفات نموذج المكافآت، وتعريف معاملات التدريب بما في ذلك عدد الحلقات وفترات التقييم، وإنشاء إعدادات الاستكشاف مع معاملات درجة الحرارة والعينات المناسبة.

يدمج التكوين أيضاً تقنيات التنظيم لمنع الإفراط في التدريب وضمان التعلم المستقر. تحافظ آليات عقوبة KL على انحراف معقول من النموذج الأساسي، بينما تشجع مكافآت الإنتروبيا على استكشاف استراتيجيات تفكير متنوعة.

### تنفيذ تدريب التعلم التعزيزي للمرحلة الأولى

يتمحور تنفيذ التدريب حول فئة مدرب شاملة تدير عملية التعلم التعزيزي بأكملها. يتعامل هذا النظام مع تهيئة النموذج بما في ذلك نماذج السياسة للتدريب ونماذج المرجع لتنظيم KL ونماذج المكافآت لتوليد التغذية الراجعة. يحضر نظام تحميل البيانات مجموعات بيانات التدريب مع التنسيق والتجميع المناسبين.

يمثل نظام حساب المكافآت مكوناً بالغ الأهمية يقيّم كلاً من الصحة الرياضية وجودة التفكير. يتضمن التحقق من الصحة الرياضية استخراج الإجابات من استجابات النموذج ومقارنتها مع الحلول الصحيحة، بينما يفحص تقييم جودة التفكير وجود أنماط التفكير المنظم وعمليات التفكير خطوة بخطوة والاتساق المنطقي طوال الاستجابة.

ينسق نظام إدارة حلقات التدريب توليد الاستجابات للمسائل الرياضية وحساب المكافآت بناءً على الصحة وجودة التفكير وتحديثات PPO لتحسين أداء السياسة. تعزز هذه العملية التكرارية تدريجياً قدرة النموذج على التعامل مع المسائل الرياضية بشكل منهجي وتوليد حلول دقيقة.

## المرحلة 3: التعلم التعزيزي للمرحلة الثانية - تدريب DeepSeek-R1

### تحضير بيانات البداية الباردة

تقدم المرحلة الثانية من التعلم التعزيزي بيانات البداية الباردة لتوفير أمثلة تفكير عالية الجودة توجه النموذج نحو أنماط تفكير أكثر تطوراً. تتكون هذه البيانات من أمثلة مصممة بعناية تُظهر عمليات التفكير المثالية، بما في ذلك خطوات التفكير الصريحة واستخدام الترميز الرياضي وبيانات الخلاصة الواضحة.

يتضمن تحضير بيانات البداية الباردة إنشاء أمثلة متنوعة عبر مجالات متعددة، وضمان التغطية الشاملة لأنماط التفكير، والحفاظ على معايير الجودة العالية في جميع أنحاء مجموعة البيانات. تعمل هذه الأمثلة كمراسي تساعد في استقرار عملية التدريب وتوجه النموذج نحو سلوكيات التفكير المرغوبة.

### تكوين التعلم التعزيزي المحسن

تستخدم المرحلة الثانية معاملات فائقة مُحسنة ودوال مكافآت محسنة تؤكد على الجودة أكثر من الصحة المحضة. يبني التكوين على نموذج المرحلة الأولى مع تنفيذ معايير تقييم أكثر تطوراً. يضع نظام المكافآت المركز على الجودة تأكيداً أكبر على تقييم عملية التفكير وتقييم قابلية قراءة الاستجابة والحفاظ على الاتساق عبر أنواع مختلفة من المسائل.

تدمج عملية التدريب بيانات البداية الباردة من خلال مراحل الضبط الدقيق الأولية التي تساعد النموذج على استيعاب أنماط التفكير عالية الجودة قبل المتابعة مع التعلم التعزيزي. يضمن هذا النهج أن النموذج يطور عادات تفكير مستقرة تستمر طوال عملية التدريب.

### تصميم دالة المكافآت المتقدمة

تنفذ المرحلة الثانية دالة مكافآت أكثر دقة تقيّم جوانب متعددة من استجابات النموذج. بما يتجاوز الصحة الأساسية، يقيّم النظام جودة التفكير من خلال التعرف على أنماط التفكير المنظم وتقييم استخدام الترميز الرياضي وفحص اتساق التدفق المنطقي. يعتبر تقييم القابلية للقراءة ملاءمة طول الجملة وجودة تنظيم الفقرات وتقليل التكرار.

تدمج دالة المكافآت أيضاً تسجيل الاتساق الذي يضمن احتفاظ النموذج بنهج تفكير متماسك عبر مسائل مماثلة. يوجه إطار التقييم الشامل هذا النموذج نحو توليد استجابات ليست صحيحة فحسب، بل أيضاً منظمة جيداً وقابلة للقراءة وذات قيمة تعليمية.

## المرحلة 4: SFT للمرحلة الأولى - تعزيز الجودة

### تحضير بيانات SFT

تركز مرحلة الضبط الدقيق المُشرف عليه على تعزيز جودة الاستجابة من خلال عينات عالية الجودة مختارة بعناية. تتضمن عملية تحضير البيانات توليد استجابات باستخدام النموذج المدرب بالتعلم التعزيزي وتصفية هذه الاستجابات بناءً على مقاييس الجودة. تقيّم عملية التصفية العينات عبر مجالات متعددة بما في ذلك الرياضيات والفيزياء والكيمياء والتفكير المنطقي وتوليد الكود.

تقيّم آليات تصفية الجودة العينات بناءً على درجات التقييم التلقائي للجودة، مما يضمن تضمين الاستجابات التي تلبي المعايير العالية فقط في مجموعة بيانات التدريب. يساعد هذا النهج الانتقائي النموذج على التعلم من الاستجابات المثالية مع تجنب تعزيز الأنماط دون المستوى الأمثل.

### تنفيذ تدريب SFT

يستخدم تنفيذ الضبط الدقيق المُشرف عليه أهداف نمذجة اللغة القياسية مع دمج اختيار البيانات المركز على الجودة. تستخدم عملية التدريب ضبط المعاملات الفائقة الدقيق مع معدلات تعلم محافظة للحفاظ على قدرات التفكير المطورة أثناء مراحل التعلم التعزيزي مع تعزيز جودة الاستجابة والاتساق.

تتضمن منهجية التدريب بروتوكولات تقييم شاملة تراقب أداء النموذج عبر مقاييس مختلفة طوال عملية الضبط الدقيق. تضمن هذه المراقبة أن تحسينات الجودة لا تأتي على حساب قدرات التفكير أو الدقة الواقعية.

## المرحلة 5: SFT للمرحلة الثانية - الاستقرار

### بيانات الأمان والاتساق

تؤكد مرحلة SFT الثانية على توافق الأمان والاتساق السلوكي من خلال مجموعات بيانات متخصصة تتعامل مع المخرجات الضارة المحتملة وتضمن السلوك المتسق عبر سياقات مختلفة. تتضمن بيانات الأمان أمثلة على الاستجابات المناسبة للطلبات الضارة المحتملة، بينما تضمن بيانات الاتساق السلوك الموحد عبر الاستعلامات المماثلة.

تنفذ هذه المرحلة دوال خسارة مخصصة تدمج اعتبارات الأمان إلى جانب أهداف نمذجة اللغة القياسية. يقيّم مكون تقييم الأمان النص المولد للمحتوى الضار المحتمل، بينما يضمن تقييم الاتساق أنماط سلوك مستقرة عبر سياقات تفاعل مختلفة.

### تقنيات التدريب المتقدمة

تستخدم مرحلة SFT الثانية تقنيات تدريب متطورة توازن أهدافاً متعددة بما في ذلك جودة الاستجابة وتوافق الأمان والاتساق السلوكي. تدمج عملية التدريب آليات تنظيم تمنع تدهور القدرات المتعلمة سابقاً مع تعزيز خصائص الأمان والاستقرار.

## المرحلة 6: التقطير - توليد النماذج المضغوطة

### إعداد نموذج المعلم-الطالب

تنقل عملية التقطير المعرفة من نموذج DeepSeek-R1 الكبير إلى نماذج أصغر وأكثر كفاءة مناسبة للنشر الإنتاجي. يتضمن الإعداد تكوين نماذج المعلمين بقدرات كاملة ونماذج الطلاب بعدد معاملات مقلل عبر أحجام مختلفة بما في ذلك متغيرات 1.5B و7B و14B و32B و70B معامل.

### توليد بيانات التقطير

تتطلب عملية التقطير توليد بيانات تدريب واسعة النطاق باستخدام نموذج المعلم. يتضمن هذا إنشاء مطالبات متنوعة تغطي النطاق الكامل لقدرات النموذج وتوليد استجابات عالية الجودة تُظهر قدرات التفكير لنموذج المعلم. تتضمن عملية توليد البيانات خطوات التحقق من الجودة لضمان استخدام استجابات المعلم المثالية فقط لتدريب الطالب.

### تنفيذ نقل المعرفة

يستخدم تدريب التقطير دوال خسارة متخصصة تجمع بين تعلم الأهداف الناعمة والإشراف على الأهداف الصلبة. يساعد مكون الهدف الناعم نموذج الطالب على تعلم توزيعات الاحتمالية للمعلم، بينما يضمن مكون الهدف الصلب الدقة الواقعية. توازن عملية التدريب بعناية هذه الأهداف لتعظيم كفاءة نقل المعرفة.

## المرحلة 7: تنفيذ خط الأنابيب الكامل

### نص التنفيذ الرئيسي

يتضمن تنفيذ خط الأنابيب الكامل تنسيق جميع مراحل التدريب من خلال نص رئيسي شامل يدير التبعيات وتخصيص الموارد وانتقالات المراحل. يتعامل النص مع إعداد البيئة وتحضير البيانات عبر جميع المراحل والتنفيذ المتسلسل لمراحل التعلم التعزيزي وSFT وعمليات التقطير النهائية.

### تقييم الأداء

يتضمن خط الأنابيب بروتوكولات تقييم شاملة تقيّم أداء النموذج في كل مرحلة باستخدام معايير موحدة. يغطي إطار التقييم التفكير الرياضي والمعرفة العامة وتوليد الكود وتقييمات الأمان لضمان أن التحسينات في مجال واحد لا تضر بالأداء في مجالات أخرى.

## اعتبارات النشر الإنتاجي

### بنية تحتية لخدمة النماذج

تتطلب النماذج المدربة بنية تحتية خدمة قوية يمكنها التعامل مع المتطلبات الحاسوبية للمهام كثيفة التفكير. تتضمن اعتبارات النشر إدارة الذاكرة لأطوال السياق الطويلة واستراتيجيات التجميع الفعالة للطلبات المتزامنة المتعددة وتقنيات التحسين لتقليل زمن الاستجابة مع الحفاظ على جودة التفكير.

### المراقبة والصيانة

يتطلب النشر الإنتاجي مراقبة مستمرة لأداء النموذج وخصائص الأمان واستخدام الموارد. يتضمن إطار المراقبة تقييم الجودة التلقائي واكتشاف انتهاكات الأمان وتنبيهات تدهور الأداء لضمان جودة الخدمة المتسقة.

## الخلاصة: بناء نماذج الذكاء الاصطناعي من الجيل التالي مع DeepSeek-R1

يمثل خط أنابيب تدريب DeepSeek-R1 نهجاً متطوراً لتطوير قدرات التفكير المتقدمة في النماذج اللغوية الكبيرة. تُظهر المنهجية متعددة المراحل كيف يمكن للتنسيق الدقيق للتعلم التعزيزي والضبط الدقيق المُشرف عليه وتقطير المعرفة إنتاج نماذج بقدرات تفكير استثنائية مع الحفاظ على خصائص النشر العملية.

### رؤى التنفيذ الرئيسية

**التعزيز التدريجي**: تبني كل مرحلة على الإنجازات السابقة مع تقديم قدرات جديدة، مما يضمن التحسن المستمر دون انحدار القدرات.

**النهج المركز على الجودة**: يعطي خط الأنابيب الأولوية لجودة عملية التفكير إلى جانب الصحة، مما ينتج نماذج تولد استجابات ذات قيمة تعليمية.

**الأمان والاستقرار**: تضمن المراحل المخصصة أن القدرات المتقدمة متوافقة مع متطلبات الأمان والاتساق السلوكي.

**الكفاءة العملية**: تمكّن عملية التقطير من نشر قدرات التفكير في بيئات محدودة الموارد مع الحفاظ على معايير الأداء.

توفر إتاحة **رخصة MIT** الاستخدام التجاري، والنصوص والتكوينات المقدمة تقدم أساساً لبناء نماذج تفكير متخصصة مصممة خصيصاً لمجالات ومتطلبات محددة. يضع هذا النهج الشامل معايير جديدة لتطوير أنظمة الذكاء الاصطناعي التي تجمع بين قدرات التفكير المتقدمة واعتبارات النشر العملية.
