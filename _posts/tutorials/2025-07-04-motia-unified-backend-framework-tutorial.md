---
title: "Motia í”„ë ˆì„ì›Œí¬ ì™„ë²½ ê°€ì´ë“œ - í†µí•© ë°±ì—”ë“œ í”„ë ˆì„ì›Œí¬ë¡œ API, ì´ë²¤íŠ¸, AI ì—ì´ì „íŠ¸ êµ¬ì¶•í•˜ê¸°"
excerpt: "Motia í”„ë ˆì„ì›Œí¬ë¥¼ í™œìš©í•œ ì´ë²¤íŠ¸ ê¸°ë°˜ ì›Œí¬í”Œë¡œìš° êµ¬ì¶• ë°©ë²•ì„ ìƒì„¸íˆ ì•Œì•„ë³´ê³ , GitHub Agentì™€ Gmail Manager ì˜ˆì‹œë¥¼ í†µí•´ ì‹¤ì œ ì‘ìš© ì‚¬ë¡€ë¥¼ ë¶„ì„í•©ë‹ˆë‹¤."
seo_title: "Motia í”„ë ˆì„ì›Œí¬ ì™„ë²½ ê°€ì´ë“œ - í†µí•© ë°±ì—”ë“œ ê°œë°œ - Thaki Cloud"
seo_description: "Motia í”„ë ˆì„ì›Œí¬ë¡œ API, ì´ë²¤íŠ¸, AI ì—ì´ì „íŠ¸ë¥¼ í†µí•© êµ¬ì¶•í•˜ëŠ” ë°©ë²•ì„ ë°°ìš°ê³ , GitHub Agentì™€ Gmail Manager ì‹¤ì œ ì˜ˆì‹œë¥¼ í†µí•´ ì‹¤ë¬´ ì ìš© ê°€ì´ë“œë¥¼ ì œê³µí•©ë‹ˆë‹¤."
date: 2025-07-04
last_modified_at: 2025-07-04
categories:
  - tutorials
  - dev
tags:
  - Motia
  - ë°±ì—”ë“œí”„ë ˆì„ì›Œí¬
  - JavaScript
  - TypeScript
  - Python
  - ì´ë²¤íŠ¸ê¸°ë°˜
  - ì›Œí¬í”Œë¡œìš°
  - API
  - ìë™í™”
  - AIì—ì´ì „íŠ¸
author_profile: true
toc: true
toc_label: "ëª©ì°¨"
toc_icon: "cog"
toc_sticky: true
canonical_url: "https://thakicloud.github.io/tutorials/motia-unified-backend-framework-tutorial/"
reading_time: true
---

â±ï¸ **ì˜ˆìƒ ì½ê¸° ì‹œê°„**: 15ë¶„

## ì„œë¡ 

í˜„ëŒ€ ì†Œí”„íŠ¸ì›¨ì–´ ê°œë°œì—ì„œ ë°±ì—”ë“œ ì‹œìŠ¤í…œì˜ ë³µì¡ì„±ì€ ê³„ì†í•´ì„œ ì¦ê°€í•˜ê³  ìˆìŠµë‹ˆë‹¤. API ì„œë²„, ë°±ê·¸ë¼ìš´ë“œ ì‘ì—…, ì˜ˆì•½ëœ íƒœìŠ¤í¬, ì‹¤ì‹œê°„ ì´ë²¤íŠ¸ ì²˜ë¦¬ ë“± ë‹¤ì–‘í•œ ì»´í¬ë„ŒíŠ¸ë¥¼ ê´€ë¦¬í•˜ê¸° ìœ„í•´ì„œëŠ” ë³´í†µ ì—¬ëŸ¬ í”„ë ˆì„ì›Œí¬ì™€ ë„êµ¬ë¥¼ ì¡°í•©í•´ì•¼ í•©ë‹ˆë‹¤. 

[Motia](https://github.com/MotiaDev/motia)ëŠ” ì´ëŸ¬í•œ ë¬¸ì œë¥¼ í•´ê²°í•˜ê¸° ìœ„í•´ ë“±ì¥í•œ í†µí•© ë°±ì—”ë“œ í”„ë ˆì„ì›Œí¬ì…ë‹ˆë‹¤. **"Unified Backend Framework for APIs, Events, and AI Agents"**ë¼ëŠ” ìŠ¬ë¡œê±´ìœ¼ë¡œ ê°œë°œìë“¤ì´ ë‹¨ì¼ í”„ë ˆì„ì›Œí¬ë¡œ ë³µì¡í•œ ì´ë²¤íŠ¸ ê¸°ë°˜ ì›Œí¬í”Œë¡œìš°ë¥¼ êµ¬ì¶•í•  ìˆ˜ ìˆë„ë¡ ì§€ì›í•©ë‹ˆë‹¤.

ì´ íŠœí† ë¦¬ì–¼ì—ì„œëŠ” Motia í”„ë ˆì„ì›Œí¬ì˜ í•µì‹¬ ê°œë…ë¶€í„° ì‹¤ì œ ì‘ìš© ì‚¬ë¡€ê¹Œì§€ ìƒì„¸íˆ ë‹¤ë£¨ì–´ë³´ê² ìŠµë‹ˆë‹¤.

## Motia í”„ë ˆì„ì›Œí¬ë€?

### í•µì‹¬ ì² í•™

MotiaëŠ” **ì½”ë“œ ìš°ì„ (Code-First)** ì ‘ê·¼ ë°©ì‹ì„ ì±„íƒí•œ í”„ë ˆì„ì›Œí¬ë¡œ, ë‹¤ìŒê³¼ ê°™ì€ ì² í•™ì„ ë°”íƒ•ìœ¼ë¡œ ì„¤ê³„ë˜ì—ˆìŠµë‹ˆë‹¤:

- **ë‹¨ì¼ í”„ë ˆì„ì›Œí¬ë¡œ ëª¨ë“  ê²ƒì„ í•´ê²°**: API, ì´ë²¤íŠ¸, ìŠ¤ì¼€ì¤„ë§ì„ í•˜ë‚˜ì˜ í”„ë ˆì„ì›Œí¬ë¡œ í†µí•©
- **Step ê¸°ë°˜ ì•„í‚¤í…ì²˜**: ëª¨ë“  ì‘ì—…ì„ Stepì´ë¼ëŠ” ë‹¨ìœ„ë¡œ ì¶”ìƒí™”
- **ì´ë²¤íŠ¸ ê¸°ë°˜ ì›Œí¬í”Œë¡œìš°**: ë¹„ë™ê¸° ì´ë²¤íŠ¸ ì²˜ë¦¬ë¥¼ í†µí•œ í™•ì¥ ê°€ëŠ¥í•œ ì‹œìŠ¤í…œ êµ¬ì¶•
- **ê°œë°œì ê²½í—˜ ìš°ì„ **: ì§ê´€ì ì¸ APIì™€ ê°•ë ¥í•œ ë””ë²„ê¹… ë„êµ¬ ì œê³µ

### ì£¼ìš” íŠ¹ì§•

#### 1. ì œë¡œ ì¸í”„ë¼ ì„¤ì •
ë©”ì‹œì§€ íë‚˜ ì´ë²¤íŠ¸ ë¸Œë¡œì»¤ ì„¤ì • ì—†ì´ ë°”ë¡œ ì´ë²¤íŠ¸ ê¸°ë°˜ ì‹œìŠ¤í…œì„ êµ¬ì¶•í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

#### 2. ë‹¤êµ­ì–´ ì§€ì›
- **JavaScript/TypeScript**: ì•ˆì •ì  ì§€ì›
- **Python**: ì•ˆì •ì  ì§€ì›  
- **Ruby**: ë² íƒ€ ì§€ì›
- **Go, Rust**: ê³§ ì¶œì‹œ ì˜ˆì •

#### 3. ë‚´ì¥ ê´€ì°° ê°€ëŠ¥ì„±
ì‹¤ì‹œê°„ ë¡œê·¸, íŠ¸ë ˆì´ìŠ¤, ì¸í„°ë™í‹°ë¸Œ í”Œë¡œìš° ì‹œê°í™”ë¥¼ Motia Workbenchì—ì„œ ì œê³µí•©ë‹ˆë‹¤.

#### 4. ì¦‰ì‹œ ì‚¬ìš© ê°€ëŠ¥í•œ API & ìŠ¤ì¼€ì¤„ë§
ë³„ë„ ì„¤ì • ì—†ì´ HTTP ì—”ë“œí¬ì¸íŠ¸ë¥¼ ë…¸ì¶œí•˜ê³  cron í‘œí˜„ì‹ìœ¼ë¡œ ì‘ì—…ì„ ì˜ˆì•½í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

## í•µì‹¬ ê°œë…

### Step: Motiaì˜ ê¸°ë³¸ ë‹¨ìœ„

**Step**ì€ Motiaì—ì„œ ê°€ì¥ ì¤‘ìš”í•œ ê°œë…ì…ë‹ˆë‹¤. ëª¨ë“  ì‘ì—…ì€ Stepìœ¼ë¡œ ì •ì˜ë˜ë©°, ì„¸ ê°€ì§€ íƒ€ì…ì´ ìˆìŠµë‹ˆë‹¤:

#### 1. API Steps (`api`)
HTTP ìš”ì²­ì„ ì²˜ë¦¬í•˜ëŠ” REST/GraphQL ì—”ë“œí¬ì¸íŠ¸ë¥¼ ì •ì˜í•©ë‹ˆë‹¤.

```javascript
// handler.step.js
export default async function handler(event) {
  return {
    message: "Hello from Motia!",
    timestamp: new Date().toISOString()
  };
}
```

#### 2. Event Steps (`event`)
ë‚´ë¶€ ë˜ëŠ” ì™¸ë¶€ ì´ë²¤íŠ¸ì— ë°˜ì‘í•˜ì—¬ ë¹„ë™ê¸° ì‘ì—…ì„ ìˆ˜í–‰í•©ë‹ˆë‹¤.

```javascript
// processor.step.js
export default async function processor(event) {
  const { data } = event;
  
  // ë°±ê·¸ë¼ìš´ë“œ ì‘ì—… ìˆ˜í–‰
  await processData(data);
  
  // ë‹¤ë¥¸ ì´ë²¤íŠ¸ ë°œìƒ
  await event.emit('processing-complete', { 
    result: 'success',
    processedAt: new Date()
  });
}
```

#### 3. Cron Steps (`cron`)
ìŠ¤ì¼€ì¤„ì— ë”°ë¼ ìë™ìœ¼ë¡œ ì‹¤í–‰ë˜ëŠ” ì‘ì—…ì„ ì •ì˜í•©ë‹ˆë‹¤.

```javascript
// daily-report.step.js
export default {
  schedule: '0 9 * * *', // ë§¤ì¼ ì˜¤ì „ 9ì‹œ
  handler: async function(event) {
    const report = await generateDailyReport();
    await event.emit('report-generated', report);
  }
};
```

### ì´ë²¤íŠ¸ ê¸°ë°˜ ì›Œí¬í”Œë¡œìš°

StepsëŠ” **emit**ê³¼ **subscribe**ë¥¼ í†µí•´ ì„œë¡œ í†µì‹ í•©ë‹ˆë‹¤:

```javascript
// API Stepì—ì„œ ì´ë²¤íŠ¸ ë°œìƒ
await event.emit('user-registered', { userId: 123 });

// Event Stepì—ì„œ ì´ë²¤íŠ¸ êµ¬ë…
// welcome-email.step.js
export default async function welcomeEmail(event) {
  if (event.topic === 'user-registered') {
    await sendWelcomeEmail(event.data.userId);
  }
}
```

### ìƒíƒœ ê´€ë¦¬

ëª¨ë“  StepsëŠ” í†µí•©ëœ í‚¤-ê°’ ì €ì¥ì†Œë¥¼ ê³µìœ í•©ë‹ˆë‹¤:

```javascript
// ìƒíƒœ ì €ì¥
await event.state.set('user-count', 1000);

// ìƒíƒœ ì¡°íšŒ
const count = await event.state.get('user-count');

// ìƒíƒœ ì‚­ì œ
await event.state.delete('temporary-data');
```

### ì‹¤ì‹œê°„ ìŠ¤íŠ¸ë¦¬ë°

ì¥ì‹œê°„ ì‹¤í–‰ë˜ëŠ” ì‘ì—…ì—ì„œ ì‹¤ì‹œê°„ ì—…ë°ì´íŠ¸ë¥¼ í´ë¼ì´ì–¸íŠ¸ë¡œ ì „ì†¡í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤:

```javascript
export default async function longRunningTask(event) {
  await event.stream('progress', { status: 'started' });
  
  for (let i = 0; i < 100; i++) {
    await performStep(i);
    await event.stream('progress', { 
      status: 'processing', 
      progress: i + 1 
    });
  }
  
  await event.stream('progress', { status: 'completed' });
}
```

## ë¹ ë¥¸ ì‹œì‘í•˜ê¸°

### 1. ìƒˆ í”„ë¡œì íŠ¸ ìƒì„±

```bash
# ëŒ€í™”í˜• ì„¤ì¹˜
npx motia@latest create -i

# í”„ë¡œì íŠ¸ ì´ë¦„ê³¼ ì–¸ì–´ ì„ íƒ
```

### 2. ê°œë°œ ì„œë²„ ì‹œì‘

```bash
# í”„ë¡œì íŠ¸ í´ë”ë¡œ ì´ë™
cd your-project-name

# Motia Workbench ì‹¤í–‰
npx motia dev
# âœ http://localhost:3000
```

### 3. ì²« ë²ˆì§¸ API í…ŒìŠ¤íŠ¸

```bash
# ìƒˆ í„°ë¯¸ë„ì—ì„œ
curl http://localhost:3000/default

# ì‘ë‹µ í™•ì¸
{"message":"Hello World from Motia!"}
```

### 4. Workbench íƒìƒ‰

ë¸Œë¼ìš°ì €ì—ì„œ `http://localhost:3000`ì— ì ‘ì†í•˜ë©´ Motia Workbenchë¥¼ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤:

- **ğŸŒŠ Flows**: Steps ê°„ ì—°ê²° ê´€ê³„ ì‹œê°í™”
- **ğŸ”Œ Endpoints**: API í…ŒìŠ¤íŠ¸ ë° ì‹¤ì‹œê°„ ê²°ê³¼ í™•ì¸
- **ğŸ‘ï¸ Traces**: ëª¨ë“  ì‹¤í–‰ì˜ end-to-end ì¶”ì 
- **ğŸ“Š Logs**: êµ¬ì¡°í™”ëœ ë¡œê·¸ ê·¸ë£¹í™”
- **ğŸª State**: í‚¤-ê°’ ì €ì¥ì†Œ ê²€ì‚¬

## ì‹¤ì œ ì‘ìš© ì‚¬ë¡€ ë¶„ì„

### GitHub Integration Workflow

GitHubì™€ì˜ í†µí•©ì„ í†µí•œ ìë™í™” ì›Œí¬í”Œë¡œìš°ë¥¼ êµ¬ì¶•í•´ë³´ê² ìŠµë‹ˆë‹¤.

#### ì•„í‚¤í…ì²˜ ì„¤ê³„

```mermaid
graph TD
    A[GitHub Webhook] --> B[webhook-handler.step.js]
    B --> C[Event: pr-opened]
    C --> D[code-review.step.js]
    C --> E[notification.step.js]
    D --> F[Event: review-completed]
    F --> G[merge-handler.step.js]
    
    H[Cron: daily-report.step.js] --> I[Event: report-generated]
    I --> J[slack-notification.step.js]
```

#### êµ¬í˜„ ì˜ˆì‹œ

**1. GitHub ì›¹í›… ì²˜ë¦¬**

```javascript
// webhook-handler.step.js
export default async function handleGitHubWebhook(event) {
  const { action, pull_request } = event.body;
  
  if (action === 'opened') {
    await event.emit('pr-opened', {
      prNumber: pull_request.number,
      repository: pull_request.base.repo.full_name,
      author: pull_request.user.login,
      title: pull_request.title
    });
  }
  
  return { status: 'processed' };
}
```

**2. ìë™ ì½”ë“œ ë¦¬ë·°**

```javascript
// code-review.step.js
export default async function autoCodeReview(event) {
  if (event.topic !== 'pr-opened') return;
  
  const { prNumber, repository } = event.data;
  
  // GitHub APIë¥¼ í†µí•´ PR ì •ë³´ ê°€ì ¸ì˜¤ê¸°
  const prDiff = await fetchPRDiff(repository, prNumber);
  
  // AI ê¸°ë°˜ ì½”ë“œ ë¦¬ë·° ìˆ˜í–‰
  const reviewComments = await performAIReview(prDiff);
  
  // GitHubì— ë¦¬ë·° ì½”ë©˜íŠ¸ ì‘ì„±
  await postReviewComments(repository, prNumber, reviewComments);
  
  // ë¦¬ë·° ì™„ë£Œ ì´ë²¤íŠ¸ ë°œìƒ
  await event.emit('review-completed', {
    prNumber,
    repository,
    reviewScore: reviewComments.score
  });
}
```

**3. ì•Œë¦¼ ì‹œìŠ¤í…œ**

```javascript
// notification.step.js
export default async function sendNotification(event) {
  const notificationMap = {
    'pr-opened': 'PRì´ ì—´ë ¸ìŠµë‹ˆë‹¤',
    'review-completed': 'AI ë¦¬ë·°ê°€ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤',
    'pr-merged': 'PRì´ ë³‘í•©ë˜ì—ˆìŠµë‹ˆë‹¤'
  };
  
  const message = notificationMap[event.topic];
  if (!message) return;
  
  await sendSlackNotification({
    channel: '#dev-team',
    message: `${message}: ${event.data.repository} #${event.data.prNumber}`
  });
}
```

**4. ì¼ì¼ ë¦¬í¬íŠ¸ ìƒì„±**

```javascript
// daily-report.step.js
export default {
  schedule: '0 9 * * *', // ë§¤ì¼ ì˜¤ì „ 9ì‹œ
  handler: async function(event) {
    const yesterday = new Date();
    yesterday.setDate(yesterday.getDate() - 1);
    
    const stats = await event.state.get('daily-stats') || {
      prsOpened: 0,
      reviewsCompleted: 0,
      prsMerged: 0
    };
    
    await event.emit('report-generated', {
      date: yesterday.toISOString(),
      stats
    });
    
    // í†µê³„ ì´ˆê¸°í™”
    await event.state.set('daily-stats', {
      prsOpened: 0,
      reviewsCompleted: 0,
      prsMerged: 0
    });
  }
};
```

### Gmail Automation Workflow

Gmailì„ í™œìš©í•œ ì´ë©”ì¼ ìë™í™” ì‹œìŠ¤í…œì„ êµ¬ì¶•í•´ë³´ê² ìŠµë‹ˆë‹¤.

#### ì•„í‚¤í…ì²˜ ì„¤ê³„

```mermaid
graph TD
    A[Gmail Webhook] --> B[email-processor.step.js]
    B --> C[Event: email-received]
    C --> D[spam-filter.step.js]
    C --> E[priority-classifier.step.js]
    D --> F[Event: spam-detected]
    E --> G[Event: high-priority]
    G --> H[urgent-notification.step.js]
    
    I[Cron: daily-cleanup.step.js] --> J[Event: cleanup-completed]
    J --> K[report-generator.step.js]
```

#### êµ¬í˜„ ì˜ˆì‹œ

**1. ì´ë©”ì¼ ì²˜ë¦¬**

```javascript
// email-processor.step.js
export default async function processEmail(event) {
  const { messageId, from, subject, body } = event.body;
  
  // ì´ë©”ì¼ ë©”íƒ€ë°ì´í„° ì €ì¥
  await event.state.set(`email:${messageId}`, {
    from,
    subject,
    receivedAt: new Date(),
    processed: false
  });
  
  // ì´ë©”ì¼ ìˆ˜ì‹  ì´ë²¤íŠ¸ ë°œìƒ
  await event.emit('email-received', {
    messageId,
    from,
    subject,
    body
  });
  
  return { status: 'queued' };
}
```

**2. ìŠ¤íŒ¸ í•„í„°ë§**

```javascript
// spam-filter.step.js
export default async function filterSpam(event) {
  if (event.topic !== 'email-received') return;
  
  const { messageId, from, subject, body } = event.data;
  
  // AI ê¸°ë°˜ ìŠ¤íŒ¸ ê²€ì‚¬
  const spamScore = await analyzeSpam(subject, body, from);
  
  if (spamScore > 0.8) {
    await event.emit('spam-detected', {
      messageId,
      from,
      spamScore
    });
    
    // Gmailì—ì„œ ìŠ¤íŒ¸ í´ë”ë¡œ ì´ë™
    await moveToSpam(messageId);
  }
}
```

**3. ìš°ì„ ìˆœìœ„ ë¶„ë¥˜**

```javascript
// priority-classifier.step.js
export default async function classifyPriority(event) {
  if (event.topic !== 'email-received') return;
  
  const { messageId, from, subject, body } = event.data;
  
  // ìš°ì„ ìˆœìœ„ í‚¤ì›Œë“œ ê²€ì‚¬
  const urgentKeywords = ['urgent', 'asap', 'emergency', 'critical'];
  const isUrgent = urgentKeywords.some(keyword => 
    subject.toLowerCase().includes(keyword) || 
    body.toLowerCase().includes(keyword)
  );
  
  // VIP ë°œì‹ ì ì²´í¬
  const vipSenders = await event.state.get('vip-senders') || [];
  const isVIP = vipSenders.includes(from);
  
  if (isUrgent || isVIP) {
    await event.emit('high-priority', {
      messageId,
      from,
      subject,
      reason: isUrgent ? 'urgent-keywords' : 'vip-sender'
    });
  }
}
```

**4. ê¸´ê¸‰ ì•Œë¦¼**

```javascript
// urgent-notification.step.js
export default async function sendUrgentNotification(event) {
  if (event.topic !== 'high-priority') return;
  
  const { from, subject, reason } = event.data;
  
  // ì¦‰ì‹œ ì•Œë¦¼ ë°œì†¡
  await sendPushNotification({
    title: 'ê¸´ê¸‰ ì´ë©”ì¼ ìˆ˜ì‹ ',
    body: `From: ${from}\nSubject: ${subject}`,
    priority: 'high'
  });
  
  // Slack ì•Œë¦¼
  await sendSlackNotification({
    channel: '#urgent-emails',
    message: `ğŸš¨ ê¸´ê¸‰ ì´ë©”ì¼ ìˆ˜ì‹ \në°œì‹ ì: ${from}\nì œëª©: ${subject}\nì‚¬ìœ : ${reason}`
  });
}
```

**5. ì¼ì¼ ì •ë¦¬**

```javascript
// daily-cleanup.step.js
export default {
  schedule: '0 23 * * *', // ë§¤ì¼ ì˜¤í›„ 11ì‹œ
  handler: async function(event) {
    const today = new Date();
    const todayStr = today.toISOString().split('T')[0];
    
    // ì˜¤ëŠ˜ ì²˜ë¦¬ëœ ì´ë©”ì¼ í†µê³„
    const emailStats = await generateEmailStats(todayStr);
    
    // ìŠ¤íŒ¸ ë©”ì¼ ì˜êµ¬ ì‚­ì œ
    await permanentlyDeleteSpam(7); // 7ì¼ ì´ìƒ ëœ ìŠ¤íŒ¸ ì‚­ì œ
    
    await event.emit('cleanup-completed', {
      date: todayStr,
      stats: emailStats
    });
  }
};
```

## ê³ ê¸‰ íŒ¨í„´ ë° ìµœì í™”

### 1. ì—ëŸ¬ ì²˜ë¦¬ ë° ì¬ì‹œë„

```javascript
// resilient-processor.step.js
export default async function resilientProcessor(event) {
  const maxRetries = 3;
  let attempt = 0;
  
  while (attempt < maxRetries) {
    try {
      const result = await processData(event.data);
      return result;
    } catch (error) {
      attempt++;
      
      if (attempt === maxRetries) {
        await event.emit('processing-failed', {
          data: event.data,
          error: error.message,
          attempts: attempt
        });
        throw error;
      }
      
      // ì§€ìˆ˜ ë°±ì˜¤í”„
      await sleep(Math.pow(2, attempt) * 1000);
    }
  }
}
```

### 2. ìƒíƒœ ê¸°ë°˜ ì›Œí¬í”Œë¡œìš°

```javascript
// state-machine.step.js
export default async function stateMachine(event) {
  const { orderId } = event.data;
  const currentState = await event.state.get(`order:${orderId}:state`) || 'pending';
  
  const transitions = {
    'pending': async () => {
      await processPayment(orderId);
      await event.state.set(`order:${orderId}:state`, 'paid');
      await event.emit('order-paid', { orderId });
    },
    'paid': async () => {
      await prepareShipment(orderId);
      await event.state.set(`order:${orderId}:state`, 'shipped');
      await event.emit('order-shipped', { orderId });
    },
    'shipped': async () => {
      await confirmDelivery(orderId);
      await event.state.set(`order:${orderId}:state`, 'delivered');
      await event.emit('order-delivered', { orderId });
    }
  };
  
  const transition = transitions[currentState];
  if (transition) {
    await transition();
  }
}
```

### 3. ë°°ì¹˜ ì²˜ë¦¬

```javascript
// batch-processor.step.js
export default async function batchProcessor(event) {
  const batchSize = 100;
  const batchKey = 'pending-items';
  
  // ë°°ì¹˜ì— ì•„ì´í…œ ì¶”ê°€
  const currentBatch = await event.state.get(batchKey) || [];
  currentBatch.push(event.data);
  
  if (currentBatch.length >= batchSize) {
    // ë°°ì¹˜ ì²˜ë¦¬ ì‹¤í–‰
    await processBatch(currentBatch);
    
    // ë°°ì¹˜ ì´ˆê¸°í™”
    await event.state.set(batchKey, []);
    
    await event.emit('batch-processed', {
      itemCount: currentBatch.length,
      processedAt: new Date()
    });
  } else {
    // ë°°ì¹˜ ì—…ë°ì´íŠ¸
    await event.state.set(batchKey, currentBatch);
  }
}
```

## ì‹¤ì œ ì‘ìš© ê°€ëŠ¥í•œ ë¶„ì•¼

### 1. ì „ììƒê±°ë˜
- **ì£¼ë¬¸ ì²˜ë¦¬ ì›Œí¬í”Œë¡œìš°**: ê²°ì œ, ì¬ê³  ê´€ë¦¬, ë°°ì†¡ ì¶”ì 
- **ê³ ê° ì„œë¹„ìŠ¤ ìë™í™”**: ë¬¸ì˜ ë¶„ë¥˜, ìë™ ì‘ë‹µ, ì—ìŠ¤ì»¬ë ˆì´ì…˜
- **ë§ˆì¼€íŒ… ìë™í™”**: ê°œì¸í™”ëœ ìº í˜ì¸, ì´íƒˆ ê³ ê° ì¬ì°¸ì—¬

### 2. ê¸ˆìœµ ì„œë¹„ìŠ¤
- **ê±°ë˜ ëª¨ë‹ˆí„°ë§**: ì‹¤ì‹œê°„ ì‚¬ê¸° íƒì§€, ìœ„í—˜ ë¶„ì„
- **ì»´í”Œë¼ì´ì–¸ìŠ¤ ìë™í™”**: ê·œì • ì¤€ìˆ˜ ì²´í¬, ë¦¬í¬íŠ¸ ìƒì„±
- **ê³ ê° ì˜¨ë³´ë”©**: KYC í”„ë¡œì„¸ìŠ¤, ê³„ì¢Œ ê°œì„¤ ì›Œí¬í”Œë¡œìš°

### 3. í—¬ìŠ¤ì¼€ì–´
- **í™˜ì ê´€ë¦¬**: ì˜ˆì•½ ì‹œìŠ¤í…œ, ì¹˜ë£Œ ì´ë ¥ ì¶”ì 
- **ì„ìƒ ì‹œí—˜**: ë°ì´í„° ìˆ˜ì§‘, ë¶„ì„ íŒŒì´í”„ë¼ì¸
- **ì˜ë£Œ ê¸°ê¸° ëª¨ë‹ˆí„°ë§**: ì‹¤ì‹œê°„ ë°ì´í„° ìˆ˜ì§‘, ì•Œë¦¼ ì‹œìŠ¤í…œ

### 4. ì½˜í…ì¸  ê´€ë¦¬
- **ë¯¸ë””ì–´ ì²˜ë¦¬**: ì´ë¯¸ì§€/ë¹„ë””ì˜¤ ë³€í™˜, ë©”íƒ€ë°ì´í„° ì¶”ì¶œ
- **ì½˜í…ì¸  ì¡°ì •**: ìë™ ê²€ì—´, í’ˆì§ˆ ê´€ë¦¬
- **ë°°í¬ ìë™í™”**: ë©€í‹°í”Œë«í¼ ë°œí–‰, ìŠ¤ì¼€ì¤„ë§

### 5. IoT ë° ìŠ¤ë§ˆíŠ¸ ì‹œí‹°
- **ì„¼ì„œ ë°ì´í„° ì²˜ë¦¬**: ì‹¤ì‹œê°„ ë¶„ì„, ì´ìƒ íƒì§€
- **ì¸í”„ë¼ ëª¨ë‹ˆí„°ë§**: êµí†µ, ì „ë ¥, ìˆ˜ë„ ì‹œì„¤ ê´€ë¦¬
- **ì˜ˆì¸¡ ìœ ì§€ë³´ìˆ˜**: ì¥ë¹„ ìƒíƒœ ë¶„ì„, êµì²´ ìŠ¤ì¼€ì¤„ë§

## ì„±ëŠ¥ ìµœì í™” ê°€ì´ë“œ

### 1. ë©”ëª¨ë¦¬ ê´€ë¦¬

```javascript
// memory-efficient.step.js
export default async function memoryEfficientProcessor(event) {
  // í° ë°ì´í„°ì…‹ì„ ìŠ¤íŠ¸ë¦¼ìœ¼ë¡œ ì²˜ë¦¬
  const stream = createReadStream(event.data.filePath);
  
  let processed = 0;
  
  for await (const chunk of stream) {
    await processChunk(chunk);
    processed++;
    
    // ì§„í–‰ ìƒí™© ìŠ¤íŠ¸ë¦¬ë°
    if (processed % 1000 === 0) {
      await event.stream('progress', { processed });
    }
  }
  
  return { totalProcessed: processed };
}
```

### 2. ë³‘ë ¬ ì²˜ë¦¬

```javascript
// parallel-processor.step.js
export default async function parallelProcessor(event) {
  const { items } = event.data;
  const concurrency = 5;
  
  const results = [];
  
  for (let i = 0; i < items.length; i += concurrency) {
    const batch = items.slice(i, i + concurrency);
    const batchPromises = batch.map(item => processItem(item));
    
    const batchResults = await Promise.all(batchPromises);
    results.push(...batchResults);
    
    // ë°°ì¹˜ ì™„ë£Œ ì•Œë¦¼
    await event.stream('batch-complete', { 
      completed: i + batch.length,
      total: items.length 
    });
  }
  
  return { results };
}
```

### 3. ìºì‹± ì „ëµ

```javascript
// cached-processor.step.js
export default async function cachedProcessor(event) {
  const cacheKey = `processed:${event.data.id}`;
  
  // ìºì‹œì—ì„œ ë¨¼ì € í™•ì¸
  const cached = await event.state.get(cacheKey);
  if (cached) {
    return cached;
  }
  
  // ì‹¤ì œ ì²˜ë¦¬
  const result = await expensiveOperation(event.data);
  
  // ìºì‹œ ì €ì¥ (TTL ì„¤ì •)
  await event.state.set(cacheKey, result, { ttl: 3600 }); // 1ì‹œê°„
  
  return result;
}
```

## í…ŒìŠ¤íŠ¸ ë° ë””ë²„ê¹…

### 1. ë‹¨ìœ„ í…ŒìŠ¤íŠ¸

```javascript
// processor.test.js
import { test, expect } from 'vitest';
import processor from './processor.step.js';

test('should process data correctly', async () => {
  const mockEvent = {
    data: { id: 1, value: 'test' },
    emit: vi.fn(),
    state: {
      get: vi.fn(),
      set: vi.fn()
    }
  };
  
  const result = await processor(mockEvent);
  
  expect(result).toEqual({ processed: true });
  expect(mockEvent.emit).toHaveBeenCalledWith('data-processed', { id: 1 });
});
```

### 2. í†µí•© í…ŒìŠ¤íŠ¸

```javascript
// integration.test.js
import { createMotiaTester } from '@motia/testing';

test('email workflow integration', async () => {
  const tester = createMotiaTester();
  
  // API í˜¸ì¶œ ì‹œë®¬ë ˆì´ì…˜
  const response = await tester.callAPI('/webhook/email', {
    from: 'test@example.com',
    subject: 'Test Email'
  });
  
  expect(response.status).toBe(200);
  
  // ì´ë²¤íŠ¸ ë°œìƒ í™•ì¸
  const events = await tester.getEmittedEvents();
  expect(events).toContain('email-received');
  
  // ìƒíƒœ ë³€ê²½ í™•ì¸
  const emailState = await tester.getState('email:123');
  expect(emailState.processed).toBe(true);
});
```

### 3. ë¡œê¹… ë° ëª¨ë‹ˆí„°ë§

```javascript
// monitored-processor.step.js
export default async function monitoredProcessor(event) {
  const startTime = Date.now();
  
  try {
    console.log('Processing started', { 
      id: event.data.id,
      type: event.data.type 
    });
    
    const result = await processData(event.data);
    
    const duration = Date.now() - startTime;
    
    console.log('Processing completed', {
      id: event.data.id,
      duration,
      resultSize: JSON.stringify(result).length
    });
    
    return result;
    
  } catch (error) {
    console.error('Processing failed', {
      id: event.data.id,
      error: error.message,
      duration: Date.now() - startTime
    });
    
    throw error;
  }
}
```

## ë°°í¬ ë° ìš´ì˜

### 1. ì»¨í…Œì´ë„ˆ ë°°í¬

```dockerfile
# Dockerfile
FROM node:18-alpine

WORKDIR /app

COPY package*.json ./
RUN npm ci --only=production

COPY . .

EXPOSE 3000

CMD ["npx", "motia", "start"]
```

### 2. í™˜ê²½ ì„¤ì •

```yaml
# docker-compose.yml
version: '3.8'

services:
  motia-app:
    build: .
    ports:
      - "3000:3000"
    environment:
      - NODE_ENV=production
      - MOTIA_DB_URL=postgresql://user:password@db:5432/motia
    depends_on:
      - db
      - redis
    
  db:
    image: postgres:15
    environment:
      - POSTGRES_DB=motia
      - POSTGRES_USER=user
      - POSTGRES_PASSWORD=password
    volumes:
      - postgres_data:/var/lib/postgresql/data
  
  redis:
    image: redis:7-alpine
    volumes:
      - redis_data:/data

volumes:
  postgres_data:
  redis_data:
```

### 3. ëª¨ë‹ˆí„°ë§ ì„¤ì •

```javascript
// monitoring.step.js
export default {
  schedule: '*/5 * * * *', // 5ë¶„ë§ˆë‹¤
  handler: async function(event) {
    const metrics = {
      timestamp: new Date(),
      memoryUsage: process.memoryUsage(),
      cpuUsage: process.cpuUsage(),
      activeConnections: await getActiveConnections(),
      queueSize: await getQueueSize()
    };
    
    await event.emit('metrics-collected', metrics);
    
    // ì„ê³„ê°’ ì²´í¬
    if (metrics.memoryUsage.heapUsed > 500 * 1024 * 1024) { // 500MB
      await event.emit('high-memory-usage', metrics);
    }
  }
};
```

## ì»¤ë®¤ë‹ˆí‹° ë° ë¦¬ì†ŒìŠ¤

### ê³µì‹ ë¦¬ì†ŒìŠ¤
- **GitHub**: [https://github.com/MotiaDev/motia](https://github.com/MotiaDev/motia)
- **ê³µì‹ ë¬¸ì„œ**: [https://www.motia.dev/docs](https://www.motia.dev/docs)
- **Discord ì»¤ë®¤ë‹ˆí‹°**: Motia ê°œë°œì ì»¤ë®¤ë‹ˆí‹° ì°¸ì—¬

### ì¶”ê°€ í•™ìŠµ ìë£Œ
- **ì˜ˆì œ í”„ë¡œì íŠ¸**: [motia-examples](https://github.com/MotiaDev/motia-examples)
- **íŠœí† ë¦¬ì–¼**: ê³µì‹ ë¬¸ì„œì˜ Real-World Use Cases ì„¹ì…˜
- **ë¸”ë¡œê·¸**: Motia íŒ€ì˜ ê¸°ìˆ  ë¸”ë¡œê·¸

## ê²°ë¡ 

MotiaëŠ” í˜„ëŒ€ì ì¸ ë°±ì—”ë“œ ê°œë°œì˜ ë³µì¡ì„±ì„ í•´ê²°í•˜ê¸° ìœ„í•´ ì„¤ê³„ëœ ê°•ë ¥í•œ í”„ë ˆì„ì›Œí¬ì…ë‹ˆë‹¤. Step ê¸°ë°˜ ì•„í‚¤í…ì²˜ì™€ ì´ë²¤íŠ¸ ê¸°ë°˜ ì›Œí¬í”Œë¡œìš°ë¥¼ í†µí•´ ë³µì¡í•œ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ì„ ê°„ë‹¨í•˜ê³  ì§ê´€ì ìœ¼ë¡œ êµ¬í˜„í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

íŠ¹íˆ ë‹¤ìŒê³¼ ê°™ì€ ê²½ìš°ì— Motiaë¥¼ ê³ ë ¤í•´ë³´ì‹œê¸° ë°”ëë‹ˆë‹¤:

1. **ë³µì¡í•œ ë¹„ì¦ˆë‹ˆìŠ¤ ì›Œí¬í”Œë¡œìš°**ê°€ í•„ìš”í•œ ê²½ìš°
2. **ì‹¤ì‹œê°„ ì´ë²¤íŠ¸ ì²˜ë¦¬**ê°€ ì¤‘ìš”í•œ ê²½ìš°  
3. **API, ë°±ê·¸ë¼ìš´ë“œ ì‘ì—…, ìŠ¤ì¼€ì¤„ë§**ì„ í†µí•© ê´€ë¦¬í•˜ê³  ì‹¶ì€ ê²½ìš°
4. **ê°•ë ¥í•œ ë””ë²„ê¹… ë° ëª¨ë‹ˆí„°ë§ ë„êµ¬**ê°€ í•„ìš”í•œ ê²½ìš°

Motiaì˜ ìƒíƒœê³„ëŠ” ê³„ì†í•´ì„œ ë°œì „í•˜ê³  ìˆìœ¼ë©°, ì»¤ë®¤ë‹ˆí‹°ì˜ í™œë°œí•œ ì°¸ì—¬ë¥¼ í†µí•´ ë”ìš± ê°•ë ¥í•œ í”„ë ˆì„ì›Œí¬ë¡œ ì„±ì¥í•  ê²ƒìœ¼ë¡œ ê¸°ëŒ€ë©ë‹ˆë‹¤.

ì§€ê¸ˆ ë°”ë¡œ Motiaë¥¼ ì‹œì‘í•´ë³´ì‹œê³ , ì—¬ëŸ¬ë¶„ë§Œì˜ í˜ì‹ ì ì¸ ì›Œí¬í”Œë¡œìš°ë¥¼ êµ¬ì¶•í•´ë³´ì„¸ìš”!

---

**ê´€ë ¨ ê¸€:**
- [Node.js ë°±ì—”ë“œ ì•„í‚¤í…ì²˜ ì„¤ê³„ ê°€ì´ë“œ](https://thakicloud.github.io/dev/nodejs-backend-architecture-guide/)
- [ì´ë²¤íŠ¸ ê¸°ë°˜ ì•„í‚¤í…ì²˜ ì™„ë²½ ê°€ì´ë“œ](https://thakicloud.github.io/dev/event-driven-architecture-guide/)
- [ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ í†µì‹  íŒ¨í„´ ë¶„ì„](https://thakicloud.github.io/dev/microservices-communication-patterns/) 